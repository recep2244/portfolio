document.addEventListener("DOMContentLoaded",()=>{const i={root:null,rootMargin:"0px",threshold:.1},a=new IntersectionObserver((e,t)=>{e.forEach(e=>{e.isIntersecting&&(e.target.classList.add("is-visible"),t.unobserve(e.target))})},i),r=document.querySelectorAll(".glass-card, .section-heading, .eyebrow, .pill, p, h1, h2, h3");r.forEach(e=>{e.classList.add("reveal-on-scroll"),a.observe(e)});const e={dockq:document.querySelector('[data-score="dockq"]'),qs:document.querySelector('[data-score="qs"]'),ics:document.querySelector('[data-score="ics"]'),modfold:document.querySelector('[data-score="modfold"]')},s=[{name:"Wild Type",dockq:.72,qs:.68,ics:.74,modfold:.65},{name:"Y33W",dockq:.85,qs:.92,ics:.88,modfold:.76},{name:"S52F",dockq:.91,qs:.87,ics:.93,modfold:.82},{name:"T28A",dockq:.68,qs:.71,ics:.65,modfold:.61},{name:"D31K",dockq:.79,qs:.84,ics:.81,modfold:.73}];let n=0;function c(){if(!e.dockq)return;const t=s[n];e.dockq&&(e.dockq.textContent=t.dockq.toFixed(2)),e.qs&&(e.qs.textContent=t.qs.toFixed(2)),e.ics&&(e.ics.textContent=t.ics.toFixed(2)),e.modfold&&(e.modfold.textContent=t.modfold.toFixed(2)),n=(n+1)%s.length}e.dockq&&setInterval(c,4e3);const t=document.querySelectorAll(".mutation-btn"),o=document.getElementById("residue-visual"),l=document.getElementById("mutation-label");t.length>0&&o&&t.forEach(e=>{e.addEventListener("click",()=>{t.forEach(e=>e.classList.remove("active","bg-slate-300")),t.forEach(e=>e.classList.add("bg-slate-100")),e.classList.add("active","bg-slate-300"),e.classList.remove("bg-slate-100");const s=e.getAttribute("data-mutation");l.textContent=s;let n="";switch(s){case"Wild Type":n=`
                            <circle cx="100" cy="65" r="8" fill="#64748b" class="transition-all duration-500" />
                            <text x="100" y="50" text-anchor="middle" fill="#475569" font-size="10" font-weight="bold">WT</text>
                        `;break;case"Y33W":n=`
                            <circle cx="100" cy="65" r="14" fill="#15803d" class="transition-all duration-500 animate-pulse" />
                            <text x="100" y="45" text-anchor="middle" fill="#15803d" font-size="12" font-weight="bold">Trp</text>
                            <path d="M90,75 L80,90" stroke="#15803d" stroke-width="2" />
                            <path d="M110,75 L120,90" stroke="#15803d" stroke-width="2" />
                        `;break;case"S52F":n=`
                            <rect x="90" y="55" width="20" height="20" fill="#1d4ed8" class="transition-all duration-500" transform="rotate(45 100 65)" />
                            <text x="100" y="45" text-anchor="middle" fill="#1d4ed8" font-size="12" font-weight="bold">Phe</text>
                        `;break;case"T28A":n=`
                            <circle cx="100" cy="65" r="6" fill="#b91c1c" class="transition-all duration-500" />
                            <text x="100" y="50" text-anchor="middle" fill="#b91c1c" font-size="10" font-weight="bold">Ala</text>
                        `;break}o.innerHTML=n})})})